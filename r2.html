<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI and Teens: A New Study</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #fafafa;
            --text-color: #333;
            --card-bg: #fff;
            --accent-color: #4361ee;
            --secondary-color: #666;
            --border-color: #eee;
        }

        .dark-mode {
            --bg-color: #121212;
            --text-color: #f0f0f0;
            --card-bg: #1e1e1e;
            --accent-color: #4895ef;
            --secondary-color: #aaa;
            --border-color: #333;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', -apple-system, sans-serif;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            height: 100vh;
            overflow: hidden;
            line-height: 1.7;
        }

        .container {
            height: 100vh;
            scroll-snap-type: y mandatory;
            overflow-y: scroll;
            -webkit-overflow-scrolling: touch;
        }

        .essay-card {
            height: 100vh;
            scroll-snap-align: start;
            padding: 20px;
            display: flex;
            flex-direction: column;
            background-color: var(--card-bg);
            position: relative;
        }

        .header-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .essay-title {
            font-size: 1.5rem;
            font-weight: 500;
            margin-bottom: 12px;
            color: var(--text-color);
        }

        .essay-content {
            font-size: 1.1rem;
            line-height: 1.8;
            margin-bottom: 20px;
            flex-grow: 1;
            overflow-y: auto;
        }

        .essay-content p {
            margin-bottom: 1.2em;
        }

        .word-tooltip {
            position: fixed;
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 16px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            z-index: 100;
            max-width: 300px;
            display: none;
        }

        .word-tooltip h4 {
            margin-bottom: 12px;
            color: var(--accent-color);
            font-size: 1.1rem;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 8px;
        }

        .word-description {
            margin-bottom: 12px;
            font-size: 0.95rem;
            color: var(--secondary-color);
        }

        .tooltip-section {
            margin-bottom: 12px;
        }

        .tooltip-section h5 {
            margin-bottom: 6px;
            color: var(--accent-color);
            font-size: 0.95rem;
        }

        .tooltip-list {
            list-style: none;
            font-size: 0.9rem;
        }

        .tooltip-list li {
            margin-bottom: 4px;
            padding-left: 12px;
            position: relative;
        }

        .tooltip-list li:before {
            content: "‚Ä¢";
            position: absolute;
            left: 0;
            color: var(--accent-color);
        }

        .theme-toggle {
            position: fixed;
            top: 16px;
            right: 16px;
            background: var(--accent-color);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 100;
        }

        .highlight {
            border-bottom: 1px dashed rgba(67, 97, 238, 0.5);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .highlight:hover {
            background-color: rgba(67, 97, 238, 0.1);
        }

        .footer {
            font-size: 0.8rem;
            color: var(--secondary-color);
            text-align: center;
            padding: 12px;
        }

        @media (max-width: 768px) {
            .header-image {
                height: 160px;
            }
            
            .essay-title {
                font-size: 1.3rem;
            }
            
            .essay-content {
                font-size: 1rem;
            }
            
            .word-tooltip {
                max-width: 280px;
                padding: 12px;
            }
        }
    </style>
</head>
<body>
    <button class="theme-toggle" id="themeToggle">‚òÄÔ∏è</button>
    
    <div class="container" id="essayContainer">
        <!-- Essay will be loaded here -->
    </div>

    <div class="word-tooltip" id="wordTooltip">
        <h4 id="tooltipWord">Word</h4>
        <div class="word-description" id="wordDescription"></div>
        <div class="tooltip-section">
            <h5>Academic Synonyms</h5>
            <ul class="tooltip-list" id="academicSynonyms"></ul>
        </div>
        <div class="tooltip-section">
            <h5>Simple Synonyms</h5>
            <ul class="tooltip-list" id="simpleSynonyms"></ul>
        </div>
    </div>

    <script>
        // Track tooltip state
        let currentTooltipWord = null;
        let currentTooltipElement = null;

        // Single essay with the provided content
        const essay = {
            id: 1,
            title: "3D-Printed Guns Article",
            content: `<p>The increase in 3D-printed guns, often called "ghost guns", are becoming a growing concern worldwide. These firearms can be made using 3D printers, downloadable blueprints, and basic materials. They have no serial numbers which makes them hard to track.</p>

    <p>Experts in the field warn that these guns could become popular among criminals and extremists. The technology has advanced rapidly, with recent models capable of firing multiple shots without breaking. This raises fears that homemade weapons could match the quality of real guns soon.</p>

    <p>An investigation revealed that Social media platforms like Instagram and Facebook have been used to advertise these guns, despite policies against it. Some sellers claim they can ship weapons globally, raising concerns about illegal gun trafficking. Authorities say it is hard to check online sales because sellers hide in private groups and apps.</p>

    <p>While some people see 3D-printed guns as a way to use their right to own weapons, others are calling for stricter regulations to prevent their spread. Some countries are considering laws to make having blueprints for these guns illegal.</p>`
        };

        // Enhanced word database with descriptions and multiple forms
        const wordData = {
    "increase": {
        description: "A rise in size, number, or amount",
        academic: ["growth", "rise", "expansion"],
        simple: ["more", "going up"]
    },
    "concern": {
        description: "A feeling of worry about something important",
        academic: ["anxiety", "apprehension", "issue"],
        simple: ["worry", "problem"]
    },
    "trace": {
        description: "To follow or find by looking for signs or evidence",
        academic: ["track", "discover", "identify"],
        simple: ["find", "follow"]
    },
    "serial numbers": {
        description: "Unique numbers given to products for identification",
        academic: ["identification codes", "registration numbers"],
        simple: ["ID numbers", "codes"]
    },
    "extremists": {
        description: "People with very strong political or religious views",
        academic: ["radicals", "fanatics"],
        simple: ["radicals", "people with extreme views"]
    },
    "capable": {
        description: "Having the ability to do something",
        academic: ["able", "competent"],
        simple: ["can do", "able to"]
    },
    "raises": {
        description: "Causes something to appear or happen",
        academic: ["brings about", "provokes"],
        simple: ["brings up"]
    },
    "revealed": {
        description: "Made something known that was hidden",
        academic: ["disclosed", "uncovered"],
        simple: ["showed", "told"]
    },
    "advertise": {
        description: "To publicly promote or show a product",
        academic: ["promote", "publicize"],
        simple: ["show", "tell people about"]
    },
    "illegal": {
        description: "Not allowed by law",
        academic: ["unlawful", "illicit"],
        simple: ["against the law", "not allowed"]
    },
    "trafficking": {
        description: "The act of trading or moving illegal goods or people",
        academic: ["smuggling", "illicit trade"],
        simple: ["illegal trade", "smuggling"]
    },
    "authorities": {
        description: "People or organizations with official power to control or enforce laws",
        academic: ["regulators"],
        simple: ["officials"]
    },
    "regulations": {
        description: "Official rules or laws made by authorities",
        academic: ["rules", "restrictions", "guidelines"],
        simple: ["rules", "laws"]
    },
    "spread": {
        description: "To move and reach more people or places",
        academic: ["dissemination", "expansion"],
        simple: ["grow", "go around"]
    },
    "considering": {
        description: "Thinking carefully about something",
        academic: ["contemplating", "deliberating"],
        simple: ["thinking about"]
    },
    "illegal": {
        description: "Not allowed by law",
        academic: ["unlawful", "illicit"],
        simple: ["against the law", "not allowed"]
    },
    "blueprints": {
        description: "Detailed plans or technical drawings",
        academic: ["designs", "schematics"],
        simple: ["plans", "drawings"]
    },
    "rapidly": {
        description: "Happening very quickly",
        academic: ["swiftly", "promptly"],
        simple: ["fast", "quickly"]
    },
    "warn": {
        description: "To tell someone about possible danger or problems",
        academic: ["caution", "alert", "advise"],
        simple: ["tell about danger", "say be careful"]
    },
    "advanced": {
        description: "More developed or at a higher level",
        academic: ["sophisticated", "progressive"],
        simple: ["developed", "modern", "high-level"]
    },
    "multiple": {
        description: "More than one; many",
        academic: ["several", "numerous"],
        simple: ["many", "a lot"]
    },
    "recent": {
        description: "Happening not long ago",
        academic: ["current", "latest"],
        simple: ["new", "not long ago"]
    },
    "investigation": {
        description: "The process of looking into something carefully to find the truth",
        academic: ["inquiry", "examination"],
        simple: ["study", "check", "research"]
    },
    "policies": {
        description: "Official plans or rules made by organizations or governments",
        academic: ["regulations", "guidelines"],
        simple: ["rules", "plans"]
    },
    "claim": {
        description: "To say something is true, even if it is not proven",
        academic: ["assert", "declare"],
        simple: ["say", "state"]
    },
    "private": {
        description: "Not for the public; meant to be kept personal or secret",
        academic: ["confidential", "restricted"],
        simple: ["secret", "personal"]
    },
    "prevent": {
        description: "To stop something from happening",
        academic: ["hinder", "prohibit", "avoid"],
        simple: ["stop", "keep from happening"]
    }
        };

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            const container = document.getElementById('essayContainer');
            const themeToggle = document.getElementById('themeToggle');
            
            // Load essay
            const essayCard = createEssayCard(essay);
            container.appendChild(essayCard);
            
            // Add footer
            const footer = document.createElement('div');
            footer.className = 'footer';
            footer.textContent = 'You\'ve reached the end ‚Ä¢ Swipe up to browse again';
            container.appendChild(footer);
            
            // Theme toggle
            themeToggle.addEventListener('click', function() {
                document.body.classList.toggle('dark-mode');
                themeToggle.textContent = document.body.classList.contains('dark-mode') ? 'üåô' : '‚òÄÔ∏è';
            });
            
            // Word click handling (delegated to document)
            document.addEventListener('click', function(e) {
                const wordTooltip = document.getElementById('wordTooltip');
                
                // Handle clicks on highlighted words
                if (e.target.classList.contains('highlight')) {
                    const word = e.target.textContent.toLowerCase();
                    
                    // If clicking the same word and tooltip is visible, hide it
                    if (currentTooltipWord === word && wordTooltip.style.display === 'block') {
                        hideTooltip();
                        return;
                    }
                    
                    // Otherwise show new tooltip
                    showTooltip(word, e.target);
                    e.preventDefault();
                    return;
                }
                
                // Hide tooltip when clicking elsewhere (except on the tooltip itself)
                if (e.target !== wordTooltip && !wordTooltip.contains(e.target)) {
                    hideTooltip();
                }
            });
        });
        
        function hideTooltip() {
            const wordTooltip = document.getElementById('wordTooltip');
            wordTooltip.style.display = 'none';
            currentTooltipWord = null;
            currentTooltipElement = null;
        }
        
        function createEssayCard(essay) {
            const card = document.createElement('div');
            card.className = 'essay-card';
            card.dataset.essayId = essay.id;
            
            // Create and add header image
            const headerImg = document.createElement('img');
            headerImg.className = 'header-image';
            headerImg.src = 'https://news-in-levels-1252061619.cos.ap-guangzhou.myqcloud.com/covers/1750336623270-ea26bdf0-4b80-11f0-86d5-3b52b53af158.png.webp/L';
            headerImg.alt = '3D-Printed Guns: A Growing Concern';
            card.appendChild(headerImg);
            
            const title = document.createElement('h2');
            title.className = 'essay-title';
            title.textContent = essay.title;
            
            const content = document.createElement('div');
            content.className = 'essay-content';
            content.innerHTML = highlightKeywords(essay.content);
            
            card.appendChild(title);
            card.appendChild(content);
            
            return card;
        }
        
        function highlightKeywords(text) {
            let result = text;
            Object.keys(wordData).forEach(word => {
                const regex = new RegExp(`\\b${word}\\b`, 'gi');
                result = result.replace(regex, `<span class="highlight">$&</span>`);
            });
            return result;
        }
        
        function showTooltip(word, element) {
            const tooltip = document.getElementById('wordTooltip');
            const tooltipWord = document.getElementById('tooltipWord');
            const wordDescription = document.getElementById('wordDescription');
            const academicList = document.getElementById('academicSynonyms');
            const simpleList = document.getElementById('simpleSynonyms');
            
            // Get the word's position relative to the viewport
            const rect = element.getBoundingClientRect();
            
            // Calculate tooltip position accounting for scroll
            const scrollX = window.scrollX || window.pageXOffset;
            const scrollY = window.scrollY || window.pageYOffset;
            
            // Position the tooltip below the word
            let leftPosition = rect.left + scrollX;
            let topPosition = rect.bottom + scrollY + 5; // 5px gap below word
            
            // Ensure tooltip stays within viewport
            const tooltipWidth = 300;
            const tooltipHeight = 280; // Approximate height
            const viewportWidth = window.innerWidth;
            const viewportHeight = window.innerHeight;
            
            // Check if tooltip would go off the right edge
            if (leftPosition + tooltipWidth > viewportWidth) {
                leftPosition = viewportWidth - tooltipWidth - 10; // 10px margin from right edge
            }
            
            // Check if tooltip would go off the left edge
            if (leftPosition < 10) {
                leftPosition = 10; // 10px margin from left edge
            }
            
            // Check if tooltip would go off the bottom edge
            if (topPosition + tooltipHeight > scrollY + viewportHeight) {
                // Position above the word instead
                topPosition = rect.top + scrollY - tooltipHeight - 5;
                
                // If still off screen, position at the top of the viewport
                if (topPosition < scrollY) {
                    topPosition = scrollY + 10;
                }
            }
            
            // Apply the calculated position
            tooltip.style.left = `${leftPosition}px`;
            tooltip.style.top = `${topPosition}px`;
            
            // Set the word in the tooltip header
            tooltipWord.textContent = word.charAt(0).toUpperCase() + word.slice(1);
            
            // Clear previous content
            wordDescription.innerHTML = '';
            academicList.innerHTML = '';
            simpleList.innerHTML = '';
            
            // Add word data if it exists
            if (wordData[word]) {
                // Add description
                wordDescription.textContent = wordData[word].description;
                
                // Add academic synonyms
                wordData[word].academic.forEach(syn => {
                    const li = document.createElement('li');
                    li.textContent = syn;
                    academicList.appendChild(li);
                });
                
                // Add simple synonyms
                wordData[word].simple.forEach(syn => {
                    const li = document.createElement('li');
                    li.textContent = syn;
                    simpleList.appendChild(li);
                });
            } else {
                // Fallback for words not in our database
                wordDescription.textContent = "No description available.";
                academicList.innerHTML = '<li>No academic synonyms found</li>';
                simpleList.innerHTML = '<li>No simple synonyms found</li>';
            }
            
            // Show the tooltip
            tooltip.style.display = 'block';
            
            // Update current tooltip state
            currentTooltipWord = word;
            currentTooltipElement = element;
            
            // Prevent tooltip from closing when clicking on it
            tooltip.addEventListener('click', function(e) {
                e.stopPropagation();
            });
        }
    </script>
</body>
</html>
